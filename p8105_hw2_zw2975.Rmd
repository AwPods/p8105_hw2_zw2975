---
title: "p8105_hw2_zw2975"
author: "Zhiyu Wei"
date: 2024-09-28
output: github_document
---

## Setup
```{r setup, include = FALSE}
library(tidyverse)
library(dplyr)
```


## Problem 1

```{r dataset}
# Import data
NYsubway = read_csv(file = "./NYC_Transit_Subway_Entrance_And_Exit_Data.csv")
# clean variable names
NYsubway = janitor::clean_names(NYsubway) %>%
  select(line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada, ada_notes) %>%
mutate(entry =if_else(entry == "YES", "TRUE",
       if_else(entry == "NO","FALSE", NA_character_))) %>%  
  mutate(vending = if_else(vending == "YES", "TRUE", 
                           if_else(vending == "NO", "FALSE", NA_character_))) %>%
  mutate(entry = as.logical(entry),
         vending = as.logical(vending))
# Now entry, vending, and ada are having logical entries
```
#### short descirption of the dataset:
The `NYsubway` dataset has variables `line`, `station_name`, `station_latitude`, `station_longitude`,`route1`, `route2`, `route3`, `route4`, `route5`, `route6`, `route7`, `route8`, `route9`, `route10`, `route11`,     `entry`, `vending`, `entrance_type`, `ada`, and `ada_notes`. 

I have cleaned the variable names to have dashed lines and all written in lower case. I cut off a few variables to make it a smaller dataset and changed the variables `vending` and `entry` to have entries `TRUE` and `FALSE` and logical. 

This dataset has `r nrow(NYsubway)` rows and `r ncol(NYsubway)` columns.

I cannot guarantee if this dataset is completed cleaned to be really tidy. But it does have a better readability and have entries that can be used for more efficient data wrangling process. 

```{r problem 1 questions}
# How many distinct stations are there? 
a = NYsubway %>%
  distinct(station_name, line) %>% # using distinct function to filter out distinct line and name entries
  count()

# How many stations are ADA compliant?
b = NYsubway %>%
  filter(ada = TRUE) %>%
  distinct(station_name, line) %>%
  count()

# What proportion of station entrances / exits without vending allow entrance?
proportion_allows_entry = NYsubway %>%
  filter(vending == FALSE) %>%  # filter our no vending
  summarise(proportion_allows_entry = mean(entry == TRUE))  # calculate the proportion

# Reformat data so that route number and route name are distinct variables. 

NYsubway <- NYsubway %>% # First need to change the columns route8 to route11 into factors to be merged together with route1 to route7.
  mutate(route8 = as.factor(route8)) %>%
  mutate(route9 = as.factor(route9)) %>%
  mutate(route10 = as.factor(route10)) %>%
  mutate(route11 = as.factor(route11)) 

#merge route1 to route11 together with the names as the route number and the values to the route served. 
NYroute <-
  pivot_longer(
    NYsubway,
    route1:route11,
    names_to = "route_number",
      values_to = "route") %>%
  filter(!is.na(route))
  
# How many distinct stations serve the A train? 
c = NYroute %>%
  filter(route == "A")  %>%
  distinct (station_name,line) %>%
  count()

# Of the stations that serve the A train, how many are ADA compliant?
A_train <- NYroute %>%
  filter(route == "A") # first store the stations into a dataset

d = A_train %>%
  filter(ada == "TRUE") %>%
  distinct(station_name,line) %>%
  count() # then count the distinct number after filter

```
#### How many distinct stations are there? 
There are `r a` distinct stations.

#### How many stations are ADA compliant?
There are `r b` stations that are ADA compliant.

#### What proportion of station entrances / exits without vending allow entrance?
`r proportion_allows_entry` of all station entrances / exits allow entrances without vending.

#### How many distinct stations serve the A train? 
There are `r c` distinct stations serve the A train. 

#### Of the stations that serve the A train, how many are ADA compliant?
There are `r d` stations that are ADA compliant out of the stations that serve the A train. 

## Problem 2
```{r}

```


```

