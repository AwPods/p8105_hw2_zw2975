p8105_hw2_zw2975
================
Zhiyu Wei
2024-09-28

## Setup

## Problem 1

``` r
# Import data
NYsubway = read_csv(file = "./NYC_Transit_Subway_Entrance_And_Exit_Data.csv")
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# clean variable names
NYsubway = janitor::clean_names(NYsubway) %>%
  select(line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada, ada_notes) %>%
mutate(entry =if_else(entry == "YES", "TRUE",
       if_else(entry == "NO","FALSE", NA_character_))) %>%  
  mutate(vending = if_else(vending == "YES", "TRUE", 
                           if_else(vending == "NO", "FALSE", NA_character_))) %>%
  mutate(entry = as.logical(entry),
         vending = as.logical(vending))
# Now entry, vending, and ada are having logical entries
```

#### short descirption of the dataset:

The `NYsubway` dataset has variables `line`, `station_name`,
`station_latitude`, `station_longitude`,`route1`, `route2`, `route3`,
`route4`, `route5`, `route6`, `route7`, `route8`, `route9`, `route10`,
`route11`, `entry`, `vending`, `entrance_type`, `ada`, and `ada_notes`.

I have cleaned the variable names to have dashed lines and all written
in lower case. I cut off a few variables to make it a smaller dataset
and changed the variables `vending` and `entry` to have entries `TRUE`
and `FALSE` and logical.

This dataset has 1868 rows and 20 columns.

I cannot guarantee if this dataset is completed cleaned to be really
tidy. But it does have a better readability and have entries that can be
used for more efficient data wrangling process.

``` r
# How many distinct stations are there? 
a = NYsubway %>%
  distinct(station_name, line) %>% # using distinct function to filter out distinct line and name entries
  count()

# How many stations are ADA compliant?
b = NYsubway %>%
  filter(ada = TRUE) %>%
  distinct(station_name, line) %>%
  count()

# What proportion of station entrances / exits without vending allow entrance?
proportion_allows_entry = NYsubway %>%
  filter(vending == FALSE) %>%  # filter our no vending
  summarise(proportion_allows_entry = mean(entry == TRUE))  # calculate the proportion

# Reformat data so that route number and route name are distinct variables. 

NYsubway <- NYsubway %>% # First need to change the columns route8 to route11 into factors to be merged together with route1 to route7.
  mutate(route8 = as.factor(route8)) %>%
  mutate(route9 = as.factor(route9)) %>%
  mutate(route10 = as.factor(route10)) %>%
  mutate(route11 = as.factor(route11)) 

#merge route1 to route11 together with the names as the route number and the values to the route served. 
NYroute <-
  pivot_longer(
    NYsubway,
    route1:route11,
    names_to = "route_number",
      values_to = "route") %>%
  filter(!is.na(route))
  
# How many distinct stations serve the A train? 
c = NYroute %>%
  filter(route == "A")  %>%
  distinct (station_name,line) %>%
  count()

# Of the stations that serve the A train, how many are ADA compliant?
A_train <- NYroute %>%
  filter(route == "A") # first store the stations into a dataset

d = A_train %>%
  filter(ada == "TRUE") %>%
  distinct(station_name,line) %>%
  count() # then count the distinct number after filter
```

#### How many distinct stations are there?

There are 465 distinct stations.

#### How many stations are ADA compliant?

There are 465 stations that are ADA compliant.

#### What proportion of station entrances / exits without vending allow entrance?

0.3770492 of all station entrances / exits allow entrances without
vending.

#### How many distinct stations serve the A train?

There are 60 distinct stations serve the A train.

#### Of the stations that serve the A train, how many are ADA compliant?

There are 17 stations that are ADA compliant out of the stations that
serve the A train.

## Problem 2

``` r
library(readxl) # need this package to read excel file

# Import and clean for Mr. Trash wheel

MrTrashWheel = read_excel("./202309 Trash Wheel Collection Data.xlsx", sheet = 1) %>%
  select(-15, -16) #variables "15" and "16" doesn't make sense so I excluded them. 
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
MrTrashWheel = janitor::clean_names(MrTrashWheel) %>% #cleaned variable names.
  filter(!is.na(dumpster)) %>% #omit rows that do not include dumpster-specific data
mutate(sports_balls = as.integer(sports_balls)) #round the number of sports balls to integers and convert to an integer variable 

# Import and clean for professor trash wheel
Prof = read_excel("./202309 Trash Wheel Collection Data.xlsx", sheet = 2)

Prof = janitor::clean_names(Prof) %>% #cleaned variable names.
  filter(!is.na(dumpster)) #omit rows that do not include dumpster-specific data

# Import and clean for Gwynnda
Gwynnda = read_excel("./202309 Trash Wheel Collection Data.xlsx", sheet = 4) 

Gwynnda = janitor::clean_names(Gwynnda) %>% #cleaned variable names.
  filter(!is.na(dumpster)) #omit rows that do not include dumpster-specific data

# Prepare for combining both datasets
Gwynnda <- Gwynnda %>%
  mutate(sheet = "Gwynnda") 

Prof <- Prof %>%
  mutate(sheet = "prof") 
  
MrTrashWheel <- MrTrashWheel %>%
  mutate(sheet = "mr_trash_wheel") %>%
  mutate(year = as.double(year))

# Combining datasets
TrashWheel = 
  bind_rows(MrTrashWheel, Prof, Gwynnda)
```

#### Report on TrashWheel dataset

After combing the 3 datasets, the final dataset,`TrashWheel` dataset,
has 845 rows and 15 columns.

I cleaned the names of all variables in the 3 datasets before merging so
that they are all lower-cased and have dash as the space between words.

`TrashWheel` dataset has variables `dumpster`, `month`, `year`,
`date`,`weight_tons`, `volume_cubic_yards`, `plastic_bottles`,
`polystyrene`, `cigarette_butts`, `glass_bottles`, `plastic_bags`,
`wrappers`, `sports_balls`, `homes_powered`, and `sheet`, where the
variable `sheet` indicates which dataset is the observation originally
from.

``` r
# For available data, what was the total weight of trash collected by Professor Trash Wheel? 
total_weight_trash <- TrashWheel %>%
  filter(sheet == "prof") %>%
  summarise(total_weight_trash = sum(weight_tons))

# What was the total number of cigarette butts collected by Gwynnda in June of 2022?
total_cigarette_butts <- Gwynnda %>%
  filter(sheet == "Gwynnda", year == 2022, month == "June") %>%
  summarise(total_cigarette_butts = sum(cigarette_butts))
```

#### For available data, what was the total weight of trash collected by Professor Trash Wheel?

Total weight collected of trash collected by Professor Trash Wheel was
216.26 tons.

#### What was the total number of cigarette butts collected by Gwynnda in June of 2022?

Total number of cigarette butts colleced by Gwynnda in June of 2022 was
1.812^{4}.
